# ==========================================================
# HMD Quick Cluster Configuration (.env.sample)
# ----------------------------------------------------------
# Whisper ASR + ECAPA-TDNN speaker embedding + PCA2D KMeans clustering
# ==========================================================

# ----------------------------------------------------------
# ğŸ“‚ Paths
# ----------------------------------------------------------
# ã™ã¹ã¦ã®å‡ºåŠ› (plain.txt, segments.jsonl, features ãªã©) ã‚’æ ¼ç´ã™ã‚‹ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€‚
# ç›¸å¯¾ãƒ‘ã‚¹æŒ‡å®šå¯ã€‚HMDãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã§ã¯é€šå¸¸ã¯ HMD/dataã€‚
HMD_DATA_ROOT=HMD/data

# ----------------------------------------------------------
# ğŸ™ Whisper Settings
# ----------------------------------------------------------
# åˆ©ç”¨ã™ã‚‹ Whisper ãƒ¢ãƒ‡ãƒ«åã€‚
# ä¾‹: tiny / base / small / medium / large-v2 / large-v3-turbo
WHISPER_MODEL=large-v3-turbo

# å‡¦ç†è¨€èªã‚³ãƒ¼ãƒ‰ (ja / en / zh ç­‰)ã€‚
WHISPER_LANGUAGE=ja

# ãƒ‡ãƒã‚¤ã‚¹æŒ‡å®š: auto â†’ CUDAãŒã‚ã‚Œã°GPU, ãªã‘ã‚Œã°CPUã€‚
# æ˜ç¤ºçš„ã« cpu / cuda ã‚‚å¯ã€‚
WHISPER_DEVICE=auto

# å‰å›å‡ºåŠ›ã‚’æ–‡è„ˆã¨ã—ã¦åˆ©ç”¨ã—ãªã„è¨­å®š (ãƒ‰ãƒªãƒ•ãƒˆæŠ‘æ­¢)
WHISPER_NO_CONDITION=1  # 1=ç„¡åŠ¹åŒ–, 0=æœ‰åŠ¹åŒ–

# words.jsonl ã‚’å‡ºåŠ›ã™ã‚‹ã‹ (ç´”æ­£Whisperã§ã¯è¿‘ä¼¼ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—)
WHISPER_NO_WORDS=0  # 1=å‡ºåŠ›ã—ãªã„, 0=å‡ºåŠ›ã™ã‚‹

# ----------------------------------------------------------
# ğŸ”Š Speaker Embedding & Feature Extraction
# ----------------------------------------------------------
# ECAPA-TDNNåŸ‹ã‚è¾¼ã¿æ™‚ã®ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆ (é€šå¸¸16kHzå›ºå®š)
HMD_SPEAKER_SR=16000

# å‰å‡¦ç†ãƒ¢ãƒ¼ãƒ‰ (apply_preprocess):
#   raw | zscore | l2 | zscore_l2 | whiten
# æ¨å¥¨: zscore
HMD_PREPROCESS=zscore

# PCAæ¬¡å…ƒæ•° (ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ç©ºé–“ä¸Šé™)
HMD_PCA_DIMS=50

# silhouetteè©•ä¾¡ç©ºé–“: 2d ã¾ãŸã¯ 50d
#   2d  : å¯è¦–åŒ–ç”¨PCA2ã§è©•ä¾¡
#   50d : æƒ…å ±ä¿æŒã—ãŸé«˜æ¬¡å…ƒã§è©•ä¾¡ (æ¨å¥¨)
HMD_PCA_EVAL=50d

# ----------------------------------------------------------
# ğŸ§© Clustering Parameters
# ----------------------------------------------------------
# k-means è©¦è¡Œç¯„å›² (minï½max)ã€‚
#   min==max â†’ å›ºå®šk, ãã‚Œä»¥å¤–ã¯silhouetteã‚¹ã‚³ã‚¢æœ€å¤§kã‚’æ¡ç”¨ã€‚
HMD_K_MIN=2
HMD_K_MAX=12

# KMeansé–¢é€£: random seedã¨åˆæœŸåŒ–å›æ•°ã€‚
HMD_RANDOM_STATE=42
HMD_KMEANS_N_INIT=auto

# ã‚·ãƒ«ã‚¨ãƒƒãƒˆã‚¹ã‚³ã‚¢è©•ä¾¡è·é›¢ (é€šå¸¸ã¯euclidean)
HMD_SILHOUETTE_METRIC=euclidean

# ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°å¯¾è±¡ãŒå°‘ãªã„å ´åˆ (< min_segments) ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®šã€‚
HMD_MIN_SEGMENTS=4  # ã“ã‚Œæœªæº€ãªã‚‰ k=2å›ºå®š ãªã©ã®å®‰å…¨ç­–ã‚’ã¨ã‚‹

# ----------------------------------------------------------
# ğŸ’¾ Output Options
# ----------------------------------------------------------
# æ—¢å­˜å‡ºåŠ›ã‚’ä¸Šæ›¸ãã™ã‚‹ã‹ (1=ä¸Šæ›¸ã, 0=ã‚¹ã‚­ãƒƒãƒ—)
HMD_OVERWRITE=0

# å¯è¦–åŒ– (Plotly HTML / PNGå‡ºåŠ›)
HMD_SAVE_HTML=1
HMD_SAVE_PNG=1

# Whisperå†åˆ©ç”¨è¨­å®š: æ—¢ã« segments.jsonl ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«ASRã‚’ã‚¹ã‚­ãƒƒãƒ—
HMD_REUSE_SEGMENTS=1  # 1=ã‚¹ã‚­ãƒƒãƒ—è¨±å¯, 0=å¸¸ã«å†è¨ˆç®—

# ----------------------------------------------------------
# ğŸ§  Advanced / Developer Options
# ----------------------------------------------------------
# æ¡ä»¶:
#  - åˆæœŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæŠ‘åˆ¶ (è©±è€…åã®èª¤å‡ºåŠ›é˜²æ­¢)
#  - envçµŒç”±ã§è¿½åŠ ã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã‚’æœ‰åŠ¹åŒ–
#WHISPER_INITIAL_PROMPT="ç™ºè©±ã®å…ˆé ­ã«è©±è€…åã‚’ä»˜ã‘ãšã€ç™ºè©±å†…å®¹ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚"

# ä¿å­˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ‹¡å¼µ (å°†æ¥çš„ãªFusionå‡¦ç†ç”¨ã®metaæ‹¡å¼µãªã©)
#HMD_SAVE_EXTRA_META=1
